trigger:
- main

pool:
  name: Default
  demands:
  - agent.version -gtVersion 3.218.0

variables:
  node_version: '14.x'

jobs:
- job: Build_and_Test
  displayName: 'Build and Test ReactJS app'
  steps:
  - task: NodeTool@0
    inputs:
      versionSpec: $(node_version)
    displayName: 'Install Node.js'

  - script: |
      npm install
      npm run build
    displayName: 'Compile ReactJS app'
  - script: |
       npm run test || true
    displayName: 'Test ReactJS app'
